<analysis>
The trajectory chronicles the iterative development of LangSwap, a full-stack language learning application. The process was highly reactive to user feedback, leading to significant scope creep beyond the initial MVP. The AI engineer started with a basic Thai-English learning app and progressively added complex features, including a three-tiered authentication system (user, staff, admin), staff management tools, and extensive settings options.

A substantial portion of the development was dedicated to UI/UX refinement and bug fixing. Recurring issues included implementing a fully functional dark mode, ensuring UI elements (like tab icons and text) were consistently visible and styled correctly, making the app's UI translatable (i18n), and debugging the Speech-to-Translate feature, which remains non-functional in the web preview environment.

The engineer also handled deployment preparation by creating documentation, configuring the backend for production (specifically for MongoDB Atlas), and setting up build configurations for the Google Play Store. The development cycles often involved the user providing screenshots of bugs, followed by the engineer attempting fixes, restarting services, and taking new screenshots for verification. The most recent interactions focus on critical UI bugs reported by the user: invisible text in dark mode and the failure of the language selection feature to translate the application's UI.

The user's primary language is English. All future communications should be in English.
</analysis>

<product_requirements>
The goal is to build LangSwap, a commercial-grade, bidirectional language learning application for iOS and Android, focusing initially on Thai and English.

**Core Functionality:**
*   **Learning Modes:** Switch between Learn Thai ðŸ‡¹ðŸ‡­ and Learn English ðŸ‡¬ðŸ‡§. All lesson categories available in Thai should be mirrored for English learners.
*   **Interactive Content:** Flashcards with TTS, swipe navigation, and images corresponding to the card's subject. Categories should include Alphabet, Numbers, Animals, Clothes, Plants, Vehicle Parts, and Household Items (e.g., mobile, ring, watch). Content must be expanded to 100+ items per category.
*   **Speech-to-Translate:** A home screen feature for real-time voice translation. The microphone must be detected and user input must appear in the text box.

**Application & Settings:**
*   **UI/UX:** A clean UI with a functional bottom tab bar. A floating action button for translation was added and then removed due to user request. Dark mode must be fully implemented across all screens, with no invisible text or un-themed components.
*   **Internationalization (i18n):** The app's UI must fully translate into the language selected by the user in the settings.
*   **Accessibility:** Settings must include features for visually impaired users (text/card scaling) and colorblind-friendly modes.
*   **Permissions:** The app must explicitly ask for necessary device permissions (e.g., microphone) in the settings.
</product_requirements>

<key_technical_concepts>
- **Full-Stack:** Expo (React Native) frontend, FastAPI (Python) backend.
- **Database:** MongoDB, with the backend configured to be compatible with Atlas for deployment.
- **Navigation:**  for file-based routing and bottom tab navigation.
- **State Management:** React Context API for , , , and .
- **Authentication:** JWT-based system with user, staff, and admin roles.
- **Audio:**  for Text-to-Speech and  for Speech-to-Text.
- **Internationalization (i18n):**  for UI translations, managed via .
</key_technical_concepts>

<code_architecture>
The application is a full-stack monorepo with an Expo frontend and a FastAPI backend.



- ****
    - **Importance:** The monolithic backend API. It manages user authentication, roles, lesson data, and health checks.
    - **Summary of Changes:** It was significantly refactored to support production deployment on Atlas by adding robust MongoDB connection logic with retry mechanisms, timeouts, and a  endpoint. An image URL field was added to the  model to support images on flashcards. A massive data generation script () was created but not yet integrated to populate the database.

- ****
    - **Importance:** Defines the primary bottom tab navigation structure. It controls which screens appear as tabs and their icons.
    - **Summary of Changes:** This file was edited multiple times to manage the tabs. A floating/duplicate translate tab, caused by a separate  file, was hidden by adding  to its screen definition. The styling of the tab bar was also enhanced to improve clickability.

- ****
    - **Importance:** The main home screen of the application. It displays lesson categories and the  component.
    - **Summary of Changes:** A critical fix was applied here to solve a persistent dark mode bug. The main container had a hardcoded light background (), which was removed and replaced with theme-aware styling. The  was also removed from this file to eliminate a duplicate translate button.

- ****
    - **Importance:** The user settings screen.
    - **Summary of Changes:** This screen was heavily modified to incorporate new, complex features. It now renders several new components: , , and , making it a central hub for user configuration.

- ** & **
    - **Importance:** These context providers manage the app's global state for dark/light mode and internationalization.
    - **Summary of Changes:** The  was updated to use a true-black background for OLED optimization. The  was created and integrated with the  component, but the UI text is not yet fully connected to the  instance, causing translations to fail. The logic for setting the  was refined to prevent crashes.
</code_architecture>

<pending_tasks>
- Fix invisible text in dark mode (e.g., white text on white backgrounds).
- Implement full UI translation so that selecting a language in settings translates all static text on all pages.
- Add new lesson content (personal items, household items) and corresponding images to all relevant categories in both Learn Thai and Learn English modes.
- Implement and verify swipe gestures (left/right) for navigating lesson cards.
- Ensure the Learn English track mirrors the same lesson structure and content as Learn Thai.
- Fix voice recognition so it shows transcribed text in the input box.
</pending_tasks>

<current_work>
The AI engineer was in the process of addressing a critical set of UI bugs reported by the user in , accompanied by screenshots. The primary issues were:
1.  **Invisible Text in Dark Mode:** The user's screenshot () clearly showed that text on the home screen was invisible (white text on a white background) when dark mode was enabled.
2.  **Failed UI Translation:** Another screenshot () showed that selecting a new language from the settings did not translate the app's UI elements as expected.
3.  **Missing Content:** The user reiterated the request for new lesson categories and images, which had not yet been implemented.

The engineer's immediate last action () was to acknowledge these critical issues and start work on the most urgent one: fixing the invisible text. The thought process correctly identified that the header text was likely using a hardcoded color that did not respect the active theme, and the engineer was about to start editing the relevant files to fix this styling issue. The work was interrupted just before the file edits began.
</current_work>

<optional_next_step>
Urgent: Fix the invisible text in dark mode by removing hardcoded text colors in the main application layout and components and replacing them with theme-aware colors from the .
</optional_next_step>
